{
  "version": "1.0",
  "parameters": {
    "dbPrefix": { "default": "" },
    "dbName": { "default": "${dbPrefix}projectdb" },
    "dbOwner": { "default": "${dbName}" },
    "dbManager": { "default": "${dbName}_manager" },
    "dbManagerPwd": { "default": "postgres" }
  },
  "databaseName": "${dbName}",
  "databaseOwner": "${dbOwner}",
  "transactions": [
    {
      "displayName": "Pre-deployment",
      "stages": [
        {
          "workdir": "pre-deployment",
          "scripts": [ "pre-deployment.sql" ]
        }
      ]
    },
    {
      "displayName": "Upgrade",
      "stages": [
        {
          "workdir": "migrations",
          "customExecutor": {
            "filePathParameter": "path",
            "fileContentParameter": "sql",
            "fileChecksumParameter": "checksum",
            "command": "SELECT system.migration_script_execute(@path, @sql, @checksum);"
          },
          "scripts": [
            "00-00-00.sql",
            "00-00-01.sql"
          ]
        },
        {
          "workdir": "setup",
          "scripts": [ "setup.sql" ]
        }
      ]
    },
    {
      "displayName": "Post-deployment",
      "stages": [
        {
          "workdir": "post-deployment",
          "scripts": [ "post-deployment.sql" ]
        }
      ]
    }
  ]
}
